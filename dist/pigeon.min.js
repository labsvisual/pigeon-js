function Pigeon(e,t){if(null==e)return void console.log("The configuration object is null. For the object to instantiate successfully, the initializer requires a configiration object.");if(null==e.method||""===e.method)return void console.log("The 'method' field is invalid. For the object to instantiate successfully, the initializer requires a 'method' field.");if(null==e.action||""===e.action)return void console.log("The 'action' field is invalid. For the object to instantiate successfully, the initializer requires a 'action' field.");if(null==e.prompt)return void console.log("The 'prompt' field is invalid. For the object to instantiate successfully, the initializer requires a 'prompt' field.");if(null==e.formElement||""===e.formElement)return void console.log("The 'formElement' field is invalid. For the object to instantiate successfully, the initializer requires a 'formElement' field.");var r=function(e){alert("Oops! There were errors in submitting the form.")},i=function(e){alert("Woohoo! :D Done.")};this.method=e.method||"POST",this.action=e.action||"/contact",this.async=t||!0,this.errorClass=e.errorClass||"error",this.prompt=e.prompt,this.errorHandler=e.errorHandler||r,this.successHandler=e.successHandler||i,this.inputs=[];var n=[];switch(e.formElement.substring(0,1)){case"#":n=document.getElementById(e.formElement.replace("#",""));break;case".":n=document.getElementsByClassName(e.formElement.replace(".",""))[0];break;default:n=document.getElementsByTagName(e.formElement)[0]}this.formElement=n,this.initialize()}String.prototype.startsWith||!function(){"use strict";var e=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t}catch(i){}return r}(),t={}.toString,r=function(e){if(null==this)throw TypeError();var r=String(this);if(e&&"[object RegExp]"==t.call(e))throw TypeError();var i=r.length,n=String(e),s=n.length,a=arguments.length>1?arguments[1]:void 0,o=a?Number(a):0;o!=o&&(o=0);var l=Math.min(Math.max(o,0),i);if(s+l>i)return!1;for(var h=-1;++h<s;)if(r.charCodeAt(l+h)!=n.charCodeAt(h))return!1;return!0};e?e(String.prototype,"startsWith",{value:r,configurable:!0,writable:!0}):String.prototype.startsWith=r}(),Pigeon.prototype.initialize=function(){for(var e=0;e<this.formElement.elements.length;e++)this.inputs.push(this.formElement.elements[e]);this.attachHandler()},Pigeon.prototype.attachHandler=function(){for(var e=this,t=0;t<this.inputs.length;t++){var r=this.inputs[t];"submit"===r.getAttribute("type").toLowerCase()&&(r.setAttribute("onclick","return false;"),r.addEventListener("click",function(){e.submit()}))}},Pigeon.prototype.validate=function(){for(var e=this,t=0;t<this.inputs.length;t++)this.inputs[t].getAttribute("class")&&this.inputs[t].getAttribute("class").indexOf(e.errorClass)>-1&&this.inputs[t].classList.remove(e.errorClass);for(var r=[],i=[],t=0;t<this.inputs.length;t++){var n=this.inputs[t],s=n.getAttribute("data-pigeon-validate");s&&s.toLowerCase().indexOf("required")>-1;if(s)for(var a=s.split(";"),o=0;o<a.length;o++){var l=a[o].split(":"),h=l[0].toLowerCase().trim(),u=n.value;switch(h){case"max-len":var c=l[1].trim();u.length>parseInt(c)&&(r.push('"'+n.name+'" exceeds the provided length constraint.'),i.push(n));break;case"min-len":var c=l[1].trim();u.length<parseInt(c)&&(r.push('"'+n.name+'" is less than the provided length constraint.'),i.push(n));break;case"digits":var p=/^[0-9]*$/;p.test(u)||(r.push('"'+n.name+'" contains invalid characters.'),i.push(n));break;case"digits-space":var p=/^[0-9 ]*$/;p.test(u)||(r.push('"'+n.name+'" contains invalid characters.'),i.push(n));break;case"only-alphabets":var p=/^[a-zA-Z ]*$/;p.test(u)||(r.push('"'+n.name+'" contains invalid characters.'),i.push(n));break;default:case"required":(null==u||""===u)&&(r.push('"'+n.name+'" is required.'),i.push(n));break;case"email":u.indexOf("@")>-1&&u.indexOf(".")>-1||(r.push('"'+n.name+'" is not a valid email address.'),i.push(n));break;case"url":(u.startsWith("http://")||u.startsWith("https://")||u.startsWith("ftp://"))&&u.indexOf(".")>-1||(r.push('"'+n.name+'" is not a valid URL.'),i.push(n));break;case"alphanumeric":var p=/^[a-zA-Z0-9 ]*$/;p.test(u)||(r.push('"'+n.name+'" contains invalid characters.'),i.push(n));break;case"phone":var d=u.startsWith("+")&&13==u.length?13:10,p=/^[0-9]*$/;(!p.test(u)||u.length>d)&&(r.push('"'+n.name+'" is not a valid phone number.'),i.push(n));break;case"credit-card":var p=/^[0-9]*$/;if(!p.test(u)||u.length>16){r.push('"'+n.name+'" is not a valid credit card number.'),i.push(n);break}for(var m=parseInt(u.substring(u.length-1)),f=u.substring(0,u.length-1),g=[],v=f.length-1;v>=0;v-=2)g.push(2*parseInt(f[v]));for(var v=0;v<g.length;v++){var b=g[v];if(b.toString().length>=2){for(var y=b,E=0;0!=y;){var k=y%10;y-=k,y/=10,E+=k}g[v]=E}}for(var v=f.length-2;v>=0;v-=2)g.push(parseInt(f[v]));for(var E=m,v=0;v<g.length;v++)E+=g[v];E%10!==0&&(r.push('"'+n.name+'" is not a valid credit card number.'),i.push(n))}}}return{isValid:0==r.length&&0==i.length,errors:r,errorElements:i}},Pigeon.prototype.formatParams=function(){for(var e="",t=0;t<this.inputs.length;t++){var r=this.inputs[t];"submit"!==r.getAttribute("type").toLowerCase()&&(e+=encodeURIComponent(r.name)+"="+encodeURIComponent(r.value)+"&")}return e.substring(0,e.length-1)},Pigeon.prototype.loadingFinishedHandler=function(xhr,inputs){var evald=eval("("+xhr.responseText+")");switch(evald.status_code){default:case 200:this.successHandler();break;case 400:case 500:this.errorHandler(inputs)}},Pigeon.prototype.submit=function(){var e=this,t=this.validate();if(t.isValid){var r=e.formatParams(),i=new XMLHttpRequest;i.open(this.method,this.action,e.async),i.request="text/json",i.onreadystatechange=function(){4==i.readyState&&e.loadingFinishedHandler(i,e.inputs)},i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(r)}else for(var n=0;n<t.errors.length;n++){var s=t.errors[n],a=t.errorElements[n];this.prompt(a,s)}};